{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://github.com/cmu-sei/ml-mismatch-descriptors/blob/master/schemas/system_context_schema.json",
    "title": "System Context Schema",
    "description": "Schema for the System Context ML-enabled system element, which comprises goals, performance. metrics, task, usage context, risks, and other context elements that influence model development, deployment, and evolution",
    "type": "object",
    "properties": {
        "version": {"const": "1.1"},
        "task": {
            "description": "Well-defined task that model is expected to perform, or problem that the model is expected to solve",
            "type": "string"
        },
        "ml_problem_type": {
            "description": "Type of ML problem that the model is intended to solve: classification, clustering, trend, alert, forecasting, summarization, benchmarking, goals, other",
            "type": "object",
            "properties": {
                "ml_problem": {
                    "description": "ML problem",
                    "type": "string",
                    "enum": [
                        "Classification",
                        "Clustering",
                        "Trend",
                        "Alert",
                        "Forecasting",
                        "Summarization",
                        "Benchmarking",
                        "Goals",
                        "Other"
                    ]
                },
                "other_problem": {
                    "description": "ML problem if previous field is Other",
                    "type": "string"
                }
            },
            "required": [
                "ml_problem",
                "other_problem"
            ]
        },
        "goals": {
            "description": "Business or mission goals that the model is going to help satisfy",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": {
                        "description": "Goal identifier - generated by TEC",
                        "type": "string"
                    },
                    "goal": {
                        "description": "Goal description",
                        "type": "string"
                    },
                    "metric": {
                        "description": "Performance metric for determining that the model is meeting the goal",
                        "type": "string"
                    },
                     "baseline": {
                        "description": "Measurement that evaluates whether or not the model will/can achieve the goal, including rationale for baseline (e.g., human parity, academic paper, system requirement)",
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "goal",
                    "metric",
                    "baseline"
                ]
            },
            "minItems" : 1
        },
        "available_data": {
            "description": "What data is available to solve the problem",
            "type": "string"
        },
        "usage_context": {
            "description": "How the results of the model are going to be used by end users or in the context of a larger system. Who is intended to use the system/model.",
            "type": "string"
        },
        "data_rights_policies": {
            "description": "Known data rights, legal, privacy, and other policies that need to be met by model and data",
            "type": "string"
        },
        "risks": {
            "description": "Risks of the model producing an incorrect inference/prediction/result",
            "type": "object",
            "properties": {
                "risk_fp": {
                    "description": "Risk of producing a false positive",
                    "type": "string"
                },
                "risk_fn": {
                    "description": "Risk of producing a false negative",
                    "type": "string"
                },
                "risk_other": {
                    "description": "Other risks of producing incorrect results",
                    "type": "string"
                }
            },
            "required": [
                "risk_fp",
                "risk_fn",
                "risk_other"
            ]
        },
        "documentation": {
            "description": "Links to any supporting documentation",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "description": {
                        "description": "Description of the document",
                        "type": "string"
                    },
                    "location": {
                        "description": "Location of document (URI)",
                        "type": "string",
                        "format": "uri"
                    }
                },
                "required": [
                    "description",
                    "location"
                ]
            }
        }
    },
    "required": [
        "version",
        "task",
        "ml_problem_type",
        "goals",
        "available_data",
        "usage_context",
        "data_rights_policies",
        "risks",
        "documentation"
    ]
}